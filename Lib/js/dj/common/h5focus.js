define("focus",function(require,exports,module){exports.init=function(){var s={param:{listClass:"focus_list",locationClass:"focus_index",showClass:"js_focusShow",showLocationClass:"on",firstCloneClass:"js_firstClone",lastCloneClass:"js_lastClone",minMoveDist:20,animateTime:200,autoScrollTime:5e3},model:{startX:0,startY:0,moveX:0,moveY:0,moveFlag:true,moveLock:false,listMarginLeft:0,isMobile:true,autoInterval:null,pcDragFlag:false},view:{},ctrl:{}};var e=s.param,t=s.model,a=s.ctrl;e.init=function(){if($("."+e.listClass).length===0||$("."+e.listClass+" a").length===0){return false}return true};t.init=function(){t.isMobile="createTouch"in document};t.getItemWidth=function(){var s=$("."+e.listClass+" a");if(s.length>1){return s[1].offsetLeft-s[0].offsetLeft}else{return $(s[0]).width()}};t.getFocusListWidth=function(){var s=-1;var t=$("."+e.listClass+" a");var a=t.length;if(a>0){var o=$(t[0]);s=o.width()*a}return s};t.isHashLocationBTag=function(){var s=$("."+e.locationClass+" b");return s.length>0};a.init=function(){if(e.init()){t.init();a.focusInit();a.addCloneTag();a.eventInit();a.startAutoScroll()}else{$("."+e.listClass).hide()}};a.startAutoScroll=function(){t.autoInterval=setInterval(function(){a.showFocusByType("next")},e.autoScrollTime)};a.focusInit=function(){var s=$("."+e.listClass+" a");s.removeClass(e.showClass);var a=$(s[0]);a.addClass(e.showClass);if(t.isHashLocationBTag()){var o=$("."+e.locationClass+" b");o.removeClass("c");var i=$(o[0]);i.addClass("c")}};a.eventInit=function(){var s=a.process;var o,i,l;o=t.isMobile?"touchstart":"mousedown";i=t.isMobile?"touchmove":"mousemove";l=t.isMobile?"touchend":"mouseleave";$("."+e.listClass).on(o,function(e){s.proStart(e)});$("."+e.listClass).on(i,function(e){if(!t.moveLock){s.proMove(e)}});$("."+e.listClass).on(l,function(e){s.proEnd(e);return false})};a.moveByIndex=function(s,a){var o=typeof a==="function"?a:function(){};var i=s*t.getItemWidth()*-1;$("."+e.listClass).animate({"margin-left":i+"px"},e.animateTime,"",o)};a.showFocusByType=function(s){if(!t.moveLock){t.moveLock=true;var o=$("."+e.showClass);var i=s==="next"?o.next():o.prev();if(t.moveFlag){var l;var n=$("."+e.listClass+" a");var r=$("."+e.locationClass+" b");n.removeClass(e.showClass);r.removeClass(e.showLocationClass);l=i.index();if(i.hasClass(e.firstCloneClass)||i.hasClass(e.lastCloneClass)){var c,f,v;if(s==="next"){f=1;v=0;c=t.getItemWidth()*-1+"px"}else{f=n.length-2;v=r.length-1;c=t.getItemWidth()*-1*f+"px"}a.moveByIndex(l,function(){t.moveLock=false;$(this).css({"margin-left":c});$(n[f]).addClass(e.showClass);$($("."+e.locationClass+" b")[v]).addClass(e.showLocationClass)})}else{a.moveByIndex(l,function(){t.moveLock=false});i.addClass(e.showClass);$($("."+e.locationClass+" b")[l-1]).addClass(e.showLocationClass)}}else{a.moveByIndex(o.index(),function(){t.moveLock=false})}}};a.addCloneTag=function(){var s=$("."+e.listClass);var a=s.find("a");var o=$(a[0]).clone();o.addClass(e.firstCloneClass);var i=$(a[a.length-1]).clone();i.addClass(e.lastCloneClass);s.append(o);s.prepend(i);var l=t.getItemWidth()*-1+"px";s.css({"margin-left":l})};a.process={};a.process.proStart=function(s){if(!t.isMobile&&t.moveLock){return}t.startX=t.isMobile?s.touches[0].pageX:s.clientX;t.startY=t.isMobile?s.touches[0].pageY:s.clientY;t.listMarginLeft=parseInt($("."+e.listClass).css("margin-left").split("px")[0],10);clearInterval(t.autoInterval);if(!t.isMobile){t.pcDragFlag=true}};a.process.proMove=function(s){if(!t.isMobile){if(!t.pcDragFlag||t.moveLock){return}}var a=t.isMobile?s.touches[0].pageX:s.clientX,o=t.isMobile?s.touches[0].pageY:s.clientY;var i,l;i=a>t.startX?a-t.startX:t.startX-a;l=o<t.startY?t.startY-o:o-t.startY;if(i>l){s.preventDefault();s.stopPropagation();t.moveX=a;var n=t.listMarginLeft+(a-t.startX);$("."+e.listClass).css({"margin-left":n+"px"})}else{t.moveY=l}};a.process.proEnd=function(s){if(!t.isMobile){t.moveX=s.clientX;if(t.pcDragFlag){t.pcDragFlag=false}else{return}}if(t.isMobile&&t.moveX===0&&t.moveY<6||!t.isMobile&&t.startX===t.moveX){window.location.href=$("."+e.showClass).attr("href")}if(t.moveY===0){if(t.moveX>t.startX){if(t.moveX-t.startX<e.minMoveDist){t.moveFlag=false}a.showFocusByType("prev")}else{if(t.startX-t.moveX<e.minMoveDist){t.moveFlag=false}a.showFocusByType("next")}t.moveFlag=true;t.moveX=0}else{t.moveY=0}a.startAutoScroll()};$(window).ready(function(){a.init()})}});